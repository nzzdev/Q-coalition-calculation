<!-- index.html to test what markup would look like locally (independent of target) -->
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Q Poll Result</title>
    <meta name="description" content="">
    <link rel="stylesheet" href="https://service.sophie.nzz.ch/bundle/sophie-q@^1.2.0-rc,sophie-font@^1.2.0-rc,sophie-color@^1.1.0-rc,sophie-viz-color@^1.2.0-rc[diverging-6].css">
    <script src="https://rawgit.com/filamentgroup/loadCSS/master/src/loadCSS.js"></script> 
  </head>
  <body>
    <div id="container">
      <div id="slogans"></div>
    </div>
    <script>
      let data = {
        "item": {
          "title": "Parolenspiegel zum Nationalstrassenfonds",
          "data": {
            "yes": {
              "parties": [
                "CVP",
                "FDP",
                "GLP",
                "SVP",
                "BDP",
                "EVP",
                ""
              ],
              "organisations": [
                "Astag",
                "Economiesasdasdasdasdasdasdasdasuisse",
                "Gemeindeverband",
                "Gewerbeverband",
                "Gewerkschaftsbund",
                "Städteverband",
                "TCS",
                "Verband öffentlicher Verkehr",
                ""
              ]
            },
            "no": {
              "parties": [
                "Grüne",
                "SP",
                ""
              ],
              "organisations": [
                "VCS",
                ""
              ]
            },
            "undecided": {
              "parties": [
                ""
              ],
              "organisations": [
                ""
              ]
            }
          }
        }
      };

      fetch(`http://localhost:3000/rendering-info/html-static`, {
          method: 'POST',
          body: JSON.stringify(data),
          headers: {
            'Content-Type': 'application/json'
          }
        })
        .then(response => {
          return response.json();
        })
        .then(data => {
          data.stylesheets.forEach(stylesheet => {
            if (stylesheet.name) {
              stylesheet.url = `http://localhost:3000/stylesheet/${stylesheet.name}`
            }
            loadCSS(stylesheet.url)
          })
          document.getElementById('slogans').innerHTML = data.markup;
        })
    </script>
  </body>
</html>
